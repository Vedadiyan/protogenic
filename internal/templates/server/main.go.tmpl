package main

import (
	helpers "github.com/vedadiyan/goal-helpers/pkg"
	auto "github.com/vedadiyan/goal/pkg/config/auto"
	"github.com/vedadiyan/goal/pkg/service"
	 _ "{{ .Import }}"
)

func init() {
	{{- range _, $key := .NatsConns}}
	helpers.AddNats("{{ $key }}")
	{{- end }}
	{{- range _, $key := .PostgresConns}}
	helpers.AddPostgres("{{ $key }}")
	{{- end }}
	{{- range _, $key := .RedisConns}}
	helpers.AddRedis("{{ $key }}")
	{{- end }}	
	{{- range _, $key := .MongoConns}}
	helpers.AddMongo("{{ $key }}")
	{{- end }}	
	{{- if .UseInfluxDb }}
	helpers.AddInfluxDb("{{ .InlfuxDb }}", "{{ .ModuleName }}")
	{{- end }}
}

func main() {
	auto.Bootstrap("{{ .ETCD }}")
	service.Bootstrap()
}
