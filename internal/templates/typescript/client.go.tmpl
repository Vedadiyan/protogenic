import axios from "axios";

{{ range $client := . }} 
export async function {{ $client.Name }}ClientAsync(baseUrl: string, input : {{ $client.RequestType }}, {{ if $client.Protected }} token: string {{ end }}) : {{ $client.ResponseType }} | Error {
    const config = {
        method: '{{ $client.Method }}',
        url: baseUrl,
        headers: { 
            {{ if $client.Protected }}
            'Authorization': `Bearer ${token}`, 
            {{ end }}
            'Content-Type': 'application/json'
        },
    };
    if(config.method.toLowerCase() != 'get') { 
        config.data = input.serialize([{{ $client.URLParams }}]);
    }
    try {
        const response = await axios(config);
        return {{ $client.ResponseType }}.deserialize(response.data)
    }
    catch(exception) {
        return exception.message
    }
}
{{ end }}